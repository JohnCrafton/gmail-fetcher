# Gmail Fetcher Configuration
# Copy this file to .env and fill in your values
# WARNING: Never commit .env or credentials.json to version control!

# =============================================================================
# USER PERMISSIONS (for flexible mode)
# =============================================================================
# Set to your user's UID/GID for easy file access (default: 65532 = nonroot)
# Find yours with: id -u (for PUID) and id -g (for PGID)
# Common: 1000:1000 for first user on most Linux systems
# Note: Distroless mode (docker-compose.distroless.yml) ignores these
PUID=65532
PGID=65532

# =============================================================================
# CREDENTIALS
# =============================================================================
# Path to Gmail API credentials JSON file
# When using Docker secrets, this will be automatically set to /run/secrets/gmail_credentials
# For local development, point to your credentials.json file
CREDENTIALS_PATH=./credentials.json

# =============================================================================
# DOWNLOAD SETTINGS
# =============================================================================
# Gmail search query (uses standard Gmail search syntax)
# Examples:
#   - "in:anywhere" - all emails (default)
#   - "from:someone@example.com" - emails from specific sender
#   - "after:2020/01/01 before:2023/12/31" - date range
#   - "has:attachment" - only emails with attachments
#   - "is:unread" - only unread emails
GMAIL_QUERY=in:anywhere

# Maximum number of emails to download (0 = unlimited)
MAX_RESULTS=0

# Include attachments in download
INCLUDE_ATTACHMENTS=true

# WARNING: Delete emails from Gmail after downloading
# USE WITH EXTREME CAUTION! This permanently deletes emails.
DELETE_AFTER_DOWNLOAD=false

# =============================================================================
# RATE LIMITING
# =============================================================================
# Gmail API quotas: 250 req/sec per user, 15,000 req/min per user
# Conservative default: 10 req/sec = well below limits
# Higher values (25-50) work fine for most accounts
# Set to 0 to disable rate limiting (not recommended)
REQUESTS_PER_SECOND=10

# Maximum retry attempts for rate limit/server errors
# Uses exponential backoff: 1s, 2s, 4s, 8s, 16s...
MAX_RETRIES=5

# =============================================================================
# OUTPUT SETTINGS
# =============================================================================
# Base directory for output (container default: /data)
DATA_DIR=/data

# =============================================================================
# ARCHIVE SETTINGS
# =============================================================================
# Enable creating compressed archive after download
ARCHIVE_ENABLED=false

# Password for encrypted archive (required if ARCHIVE_ENABLED=true)
# For Docker secrets, this can be read from /run/secrets/archive_password
ARCHIVE_PASSWORD=

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. NEVER commit credentials.json or token.json to git
# 2. Use Docker secrets for production deployments
# 3. Set restrictive file permissions: chmod 600 .env credentials.json
# 4. Regularly rotate your Gmail API credentials
# 5. Use application-specific passwords if available
# 6. Review downloaded data before enabling DELETE_AFTER_DOWNLOAD
# 7. Keep archive passwords in a secure password manager
